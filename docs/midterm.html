<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jeff Jacobs">
<meta name="dcterms.date" content="2025-05-18">

<title>DSAN 5450 Midterm Study Guide – DSAN 5650</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-79108a0fc1995748cbd19a5b0e3e3e7c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-b2511bcbb01c2159fd96a78deb42ffd9.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/dreampulse/computer-modern-web-font@master/fonts.css"><script src="./sidebar.js"></script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="./dsan-globals/jjstyles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./midterm.html">Midterm</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DSAN 5650: Causal Inference for Computational Social Science</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-house pe-1"></i> Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./resources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writeups/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writeups</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./assignments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./midterm.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Midterm</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./final.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Project</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.zoom.us/j/94931835080?pwd=f9xg1L66RDOXjoySuPCSCLK1adbJwM.1" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Zoom Link <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://georgetown.hosted.panopto.com/Panopto/Pages/Sessions/List.aspx?folderID=d240de45-5abb-4eea-8b13-b2590063001d" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Recordings <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./w01/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1: May 21</span></a>
  </div>
</li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://classroom.google.com/c/NzQzMjkyMzg4NjIw?cjc=ilkwdqn" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Google Classroom <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://jjacobs.me/meet" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Office Hours <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://forms.gle/s35xJBf8Dj6XR5pr8" class="sidebar-item-text sidebar-link" target="_blank">
 <span class="menu-text">Suggestion Box <i class="bi bi-box-arrow-up-right ps-1"></i></span></a>
  </div>
</li>
    </ul>
    </div>
<div class="quarto-sidebar-footer"><div class="sidebar-footer-item">
<p><em>Updated 2025-05-14, 10:39:46 PM</em></p>
</div></div></nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#part-1-high-level-data-ethics-considerations" id="toc-part-1-high-level-data-ethics-considerations" class="nav-link" data-scroll-target="#part-1-high-level-data-ethics-considerations">Part 1: High-Level Data Ethics Considerations</a>
  <ul class="collapse">
  <li><a href="#the-library-of-missing-datasets" id="toc-the-library-of-missing-datasets" class="nav-link" data-scroll-target="#the-library-of-missing-datasets">(1.1) The Library of Missing Datasets</a></li>
  <li><a href="#operationalization" id="toc-operationalization" class="nav-link" data-scroll-target="#operationalization">(1.2) Operationalization</a></li>
  </ul></li>
  <li><a href="#part-2-ethical-frameworks" id="toc-part-2-ethical-frameworks" class="nav-link" data-scroll-target="#part-2-ethical-frameworks">Part 2: Ethical Frameworks</a>
  <ul class="collapse">
  <li><a href="#descriptive-vs.-normative" id="toc-descriptive-vs.-normative" class="nav-link" data-scroll-target="#descriptive-vs.-normative">(2.1) Descriptive vs.&nbsp;Normative</a></li>
  <li><a href="#consequentialism-vs.-deontological-ethics" id="toc-consequentialism-vs.-deontological-ethics" class="nav-link" data-scroll-target="#consequentialism-vs.-deontological-ethics">(2.2) Consequentialism vs.&nbsp;Deontological Ethics</a></li>
  </ul></li>
  <li><a href="#part-3-context-free-fairness-and-proxy-variables" id="toc-part-3-context-free-fairness-and-proxy-variables" class="nav-link" data-scroll-target="#part-3-context-free-fairness-and-proxy-variables">Part 3: Context-Free Fairness and Proxy Variables</a></li>
  <li><a href="#part-4-context-sensitive-fairness" id="toc-part-4-context-sensitive-fairness" class="nav-link" data-scroll-target="#part-4-context-sensitive-fairness">Part 4: Context-Sensitive Fairness</a>
  <ul class="collapse">
  <li><a href="#individual-similarity-based-fairness" id="toc-individual-similarity-based-fairness" class="nav-link" data-scroll-target="#individual-similarity-based-fairness">(4.1) Individual-Similarity-Based Fairness</a></li>
  <li><a href="#causal-fairness" id="toc-causal-fairness" class="nav-link" data-scroll-target="#causal-fairness">(4.2) Causal Fairness</a></li>
  </ul></li>
  <li><a href="#part-5-doin-thangs-causality-continued" id="toc-part-5-doin-thangs-causality-continued" class="nav-link" data-scroll-target="#part-5-doin-thangs-causality-continued">Part 5: Doin Thangs (Causality Continued)</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jpowerj/dsan5650/blob/main/midterm.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">DSAN 5450 Midterm Study Guide</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Extra Writeups</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jeff Jacobs </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 18, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>The DSAN 5450 in-class midterm will start at <strong>3:30pm on Wednesday, February 26th</strong>. It is intended to take only 1.5 hours, but you will have 3 hours to take it just in case, so that it will be due by <strong>6:30pm</strong>.</p>
<p>We’ve covered a lot of… sometimes-disjointed topics thus far, so our goal for the midterm is to emphasize the most important takeaways from across the first six weeks of the class, by putting them in your brain’s short-term memory <strong>one more time</strong> before we dive into the second, policy-focused half of the course when you come back from spring break! As a reminder, there is a very good reason to continually try and <strong>re-remember</strong> the same course topics, coming from studies of long-term memory retention:</p>
<center>
<img width="60%" src="https://jpj.georgetown.domains/dsan5450-scratch/midterm/spaced_rep.jpg">
</center>
</section>
<section id="part-1-high-level-data-ethics-considerations" class="level2">
<h2 class="anchored" data-anchor-id="part-1-high-level-data-ethics-considerations">Part 1: High-Level Data Ethics Considerations</h2>
<p>This part corresponds roughly to the first two sessions of the course, where we talked about key “high-level” questions in data ethics.</p>
<section id="the-library-of-missing-datasets" class="level3">
<h3 class="anchored" data-anchor-id="the-library-of-missing-datasets">(1.1) The Library of Missing Datasets</h3>
<p>Why does some information <strong>already exist</strong> in the form of nicely-formatted, easily-accessible datasets, while other information does not?</p>
<ul>
<li>Here the specific reference in class was to the <a href="https://mimionuoha.com/the-library-of-missing-datasets" target="_blank">Library of Missing Datasets</a>, so you can check out the photos at that link for examples of missing datasets.</li>
<li>The midterm question here could, therefore, ask you to think through the process by which a certain dataset <strong>came into existence</strong> as (e.g.) a clean, easily-available <code>.csv</code> file, and/or why another set of data might not exist in this form.</li>
</ul>
</section>
<section id="operationalization" class="level3">
<h3 class="anchored" data-anchor-id="operationalization">(1.2) Operationalization</h3>
<p>What types of data-ethical issues arise because of the “gap” between <strong>conceptual</strong> variables and <strong>operationalized</strong> variables?</p>
<ul>
<li><p>Here the main reference for you is <a href="https://jjacobs.me/dsan5450/w02/slides.html#/operationalization" target="_blank">this slide</a> from Week 2</p></li>
<li><p>For the possible midterm question here, specifically, you should focus on the idea behind the book on the right side of that slide: “Mis-Measuring Our Lives”. That book points out the gap between the conceptual variable <strong>[economic well-being]</strong> and its <strong>operationalization</strong> as <strong>[GDP]</strong>.</p>
<ul>
<li>So, for the midterm, we might ask you to consider a conceptual variable like “fairness” or “privacy”, and think through different ways they could be operationalized as measurable quantities.</li>
</ul></li>
</ul>
</section>
</section>
<section id="part-2-ethical-frameworks" class="level2">
<h2 class="anchored" data-anchor-id="part-2-ethical-frameworks">Part 2: Ethical Frameworks</h2>
<section id="descriptive-vs.-normative" class="level3">
<h3 class="anchored" data-anchor-id="descriptive-vs.-normative">(2.1) Descriptive vs.&nbsp;Normative</h3>
<p>I think you all did a great job of demonstrating that you understand this distinction, through homeworks and discussions (in class and in office hours)! So, on this topic I think you can just review the basic “gist” of how this works:</p>
<p><strong>Two types of <em>Descriptive</em> statements:</strong></p>
<ul>
<li><strong>Non-implicational statements</strong> that describe facts, like <span class="math inline">\(1 + 1 = 2\)</span>, are <em>descriptive</em> but <em>indeterminate</em> without a set of axioms (definitions for the symbols, in this case)</li>
<li><strong>Implicational statements</strong> that describe facts, like <span class="math inline">\(ZFC \implies 1 + 1 = 2\)</span>, are <em>descriptive</em> and also <em>determinate</em> (in this case, determinately true)</li>
</ul>
<p><strong>Two types of <em>Normative</em> statements:</strong></p>
<ul>
<li>When the statements are not <strong>descriptions</strong> of empirically/observationally (and intersubjectively) verifiable predicates about how things <strong>are</strong> (“Grass is green”), but are instead <strong>prescriptions</strong> of how things <strong>ought</strong> to be (“Grass ought to be green”/“It is good for grass to be green and bad for grass to be blue”), they have additional <strong>normative</strong> dimensions</li>
<li>However, in the same way that the descriptive statement <span class="math inline">\(1 + 1 = 2\)</span> goes from indeterminate to determine when we provide a set of <strong>axioms</strong>, normative statements are also transformed from indeterminate to determinate when we provide an <strong>ethical framework</strong> within which the normative statement can be evaluated.</li>
</ul>
</section>
<section id="consequentialism-vs.-deontological-ethics" class="level3">
<h3 class="anchored" data-anchor-id="consequentialism-vs.-deontological-ethics">(2.2) Consequentialism vs.&nbsp;Deontological Ethics</h3>
<p>This portion would also very much involve the <strong>two most common concrete versions</strong> of these two ethical frameworks:</p>
<ul>
<li><strong>Utilitarianism</strong> as the most common consequentialist framework</li>
<li><strong>Kantian Ethics</strong> as the most common deontological-ethical framework</li>
</ul>
<p>On the latter two points specifically, I didn’t make the distinction as clearly as I should have in class, so I’m making it here!</p>
<p><strong>Question 2.5</strong> from <strong>Homework 1</strong> provided the following statement:</p>
<blockquote class="blockquote">
<p>«Lying is bad, since you wouldn’t want others to lie to you.»</p>
</blockquote>
<p>And then, between Consequentialism and Deontological Ethics, the correct answer was that this statement is more straightforwardly implied by <strong>Deontological Ethics</strong>. I know this one is particularly difficult to think through, but I wanted to highlight it here because this is the question that really reveals the subtle-but-important distinction between these two systems:</p>
<ul>
<li>A <strong>consequentialist</strong> approach to “resolving” a dilemma around lying would, crucially, be based on a <strong>prediction</strong> of the <strong>actual consequences</strong> that would result from a possible choice, whereas</li>
<li>A <strong>deontological</strong> approach differs from this in considering <strong>what makes a possible choice good or bad in-and-of-itself</strong>, <strong>without</strong> reference to the predicted consequences.</li>
</ul>
<p>The reason I phrase the distinction in this way is because, in the above statement, you can focus on the portion after the word “since” (“since you wouldn’t want others to lie to you”):</p>
<ul>
<li>Within a <strong>consequentialist</strong> framework, this reasoning would <strong>not</strong> itself constitute a justification for not lying, since it would have to be <strong>paired with</strong> a statement like “If I lie, then it is likely that others will lie to me”, which is <strong>not true in general!</strong> The idiom of a <a href="https://www.merriam-webster.com/dictionary/white%20lie" target="_blank">“white lie”</a>, for example, comes precisely from the fact that there are often times when we feel like we <strong>should</strong> lie to people to avoid the <strong>consequence</strong> of hurting them.</li>
<li>Within a <strong>deontological</strong> framework, on the other hand, this reasoning <strong>would</strong> constitute a justification for not lying, since it corresponds precisely to the <strong>rule</strong> that was mentioned in the prior two questions: Kant’s <strong>Categorical Imperative</strong>.</li>
<li>This <strong>Categorical Imperative</strong> rule is of special interest, relative to the full set of “ethical rules” you could imagine using, because it is a rule for making ethical decisions <strong>without reference to the consequences</strong> of a particular choice:
<ul>
<li>Instead of <strong>predicting</strong> what might happen if I make this choice, and judging whether it is an ethical choice on that basis…</li>
<li>I now <strong>imagine</strong> what would happen <strong>hypothetically</strong> if <strong>everyone else in the world</strong> made the choice, <strong>whether or not</strong> my action would in fact make everyone else in the world make the same choice!</li>
</ul></li>
</ul>
<p>I hope that explanation, and the reference to “white lies” as an example, can help make it more clear why the answer to Question 2.5 was “Deontological Ethics”. As one final point, to make it super concrete:</p>
<ul>
<li>The reason why the answer is <strong>not</strong> Consequentialism here is because, a Consequentialist might <strong>agree</strong> that “I wouldn’t want others to lie to me”, and yet also think “But that’s <strong>not</strong> a good reason to not lie, since I could lie here without it <strong>causing</strong> others to lie to me.”</li>
<li>That is what would enable “white lies” to be acceptable under consequentialism: since you only consider the predicted consequences of your action in the “real world”, rather than in a hypothetical world where everyone does the same action, you are then able to move to a comparison of whether the <strong>benefits</strong> of lying outweigh the <strong>costs</strong> of lying, as one way to make the decision (by “calculating” the consequences!).</li>
</ul>
</section>
</section>
<section id="part-3-context-free-fairness-and-proxy-variables" class="level2">
<h2 class="anchored" data-anchor-id="part-3-context-free-fairness-and-proxy-variables">Part 3: Context-Free Fairness and Proxy Variables</h2>
<p>Here the main idea will be to think through the fairness definitions introduced in this part:</p>
<ul>
<li>Fairness Through Unawareness (Removing “sensitive” variables from the dataset)</li>
<li>Fairness as Equalized Positive Rate</li>
<li>Fairness as Equalized False Positive Rate</li>
<li>Fairness as Equalized False Negative Rate</li>
<li>Fairness as Calibration</li>
</ul>
<p>And especially to be able to understand the “simple” cases when these might work, but also the non-simple cases where these fail to capture what we’d like a robust / <strong>actually-usable</strong> fairness measure to capture. Some straightforward questions to guide you in this thinking for this part would be, e.g.:</p>
<ul>
<li>Can we have <strong>all</strong> of these measures at once?
<ul>
<li>Short answer: No.&nbsp;But, you should also have some degree of intuition from class about <strong>why</strong> we can’t (the impossibility results)</li>
</ul></li>
<li>The first four are probably more straightforward, as things we can achieve by dropping variables (Unawarness) or by reading the entries in a confusion matrix. <strong>Calibration</strong>, however, requires a bit more thought:
<ul>
<li>How is calibration defined? The most succinct definition would just be: the requirement that the value of the <strong>risk score <span class="math inline">\(r(X)\)</span></strong> that “underlies” the decision-making algorithm (in that it is used to produce our predictions <span class="math inline">\(\widehat{Y}\)</span>) is itself a <strong>probability</strong> value—namely, the probability that a person with attributes <span class="math inline">\(X\)</span> has associated outcome <span class="math inline">\(Y\)</span>.</li>
<li>Why is calibration <strong>desirable</strong>? Why does it help us in terms of assessing fairness? The definition in the previous bullet point is not very easy-to-understand (to me, at least), so that I interpret it as just a requirement that <strong>the risk score “tracks” the relationship between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> in a direct way</strong>: for example, high values of <span class="math inline">\(\Pr(Y \mid X)\)</span> mean high values of the underlying representation <span class="math inline">\(r(X)\)</span> that is used to generate <span class="math inline">\(\widehat{Y}\)</span> as a prediction of <span class="math inline">\(Y\)</span>.</li>
<li>Viewed in this way, then, I hope it makes sense that this property would be <strong>desirable</strong> in terms of <strong>interpretability</strong>: it means that, if we wanted to know why our prediction algorithm was producing some specific prediction <span class="math inline">\(\widehat{Y}_i\)</span> for a person with attributes <span class="math inline">\(X_i\)</span>, we could “open up the black box” of the algorithm and look directly at the <strong>risk score</strong> <span class="math inline">\(r(X_i)\)</span> with respect to the <strong>risk score function <span class="math inline">\(r(\cdot)\)</span> in general</strong>, to see <strong>why</strong> it produced such a high/low value of <span class="math inline">\(\widehat{Y}_i\)</span>.</li>
<li>I know even that last point can still be confusing, so to me the final “piece” for understanding is to think about how: if we <strong>didn’t</strong> have calibration, then we would have <strong>no natural way of interpreting the risk function <span class="math inline">\(r(\cdot)\)</span></strong>. Since without calibration it is not <strong>constrained</strong> to represent a probability, it could take on any value—<span class="math inline">\(\pi\)</span>, <span class="math inline">\(-1000\)</span>, <span class="math inline">\(\sqrt{2^{100}}\)</span>—and we would have no way of knowing the relationship between these values and the resulting predictions <span class="math inline">\(\widehat{Y}\)</span>; no way of knowing, for example, why plugging in a person with characteristics <span class="math inline">\(X_i\)</span> produced <span class="math inline">\(r(X_i) = \pi\)</span> which then led to the prediction <span class="math inline">\(\widehat{Y}_i = 1\)</span>, to detain this person until trial!</li>
</ul></li>
</ul>
</section>
<section id="part-4-context-sensitive-fairness" class="level2">
<h2 class="anchored" data-anchor-id="part-4-context-sensitive-fairness">Part 4: Context-Sensitive Fairness</h2>
<p>We spent some amount of time <strong>critiquing</strong> the fairness definitions mentioned in the previous section. This was not for the sake of judging whether they’re “good” or “bad” as such, but rather, for the sake of <strong>understanding specifically what they’re missing</strong>. Two different characterizations of what they’re missing give us our two key <strong>context-sensitive</strong> approaches to fairness, discussed in the next two sections:</p>
<section id="individual-similarity-based-fairness" class="level3">
<h3 class="anchored" data-anchor-id="individual-similarity-based-fairness">(4.1) Individual-Similarity-Based Fairness</h3>
<ol type="1">
<li>The Context-Free measures fail to consider how <strong>satisfying a criterion</strong> (e.g., Equalized False Positive Rate) at a <strong>group level</strong> could trample over the rights of <strong>individuals</strong>.</li>
</ol>
<p>The illustration of this failure that I mentioned in class boiled down to:</p>
<ul>
<li>Let <span class="math inline">\(A_i\)</span> represent a sensitive attribute of individuals, such that <span class="math inline">\(A_i = 0\)</span> if person <span class="math inline">\(i\)</span> is white, and <span class="math inline">\(A_i = 1\)</span> if person <span class="math inline">\(i\)</span> is black.</li>
<li>If a police department finds itself failing to satisfy a fairness criterion like Equality of Positive Rates, in the sense that their arrest rate <span class="math inline">\(r_1\)</span> for individuals with <span class="math inline">\(A_i = 1\)</span> is higher than their arrest rate <span class="math inline">\(r_0\)</span> for individuals with <span class="math inline">\(A_i = 0\)</span>, then…</li>
<li>They can quickly “resolve” this failure and satisfy the criterion by running outside and arresting the first <span class="math inline">\(N\)</span> white people they see, where <span class="math inline">\(N\)</span> is the number of additional white arrestees that would be necessary to make <span class="math inline">\(r_0 = r_1\)</span>.</li>
</ul>
<p>However, as this illustration hopefully makes clear, this procedure would allow <strong>satisfaction of the group-level fairness criterion</strong>, but only at the <strong>expense</strong> of violating our intuitive notions of <strong>fairness towards individuals</strong>.</p>
<p>Although there are lots and lots of ways that this notion of <strong>individual-level fairness</strong> could be incorporated into the Context-Free fairness measures to make them Context-Sensitive, one of the most popular and straightforward ways is by constructing an <strong>indiviudal-similarity-based</strong> fairness measure, and then using it to constrain the space of possible decisions by enforcing the rule that:</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Fairness Through Awareness [@dwork_fairness_2011]">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Fairness Through Awareness <span class="citation" data-cites="dwork_fairness_2011">(<a href="#ref-dwork_fairness_2011" role="doc-biblioref"><strong>dwork_fairness_2011?</strong></a>)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Individuals who are similar with respect to a task should be classified similarly.</strong></p>
</div>
</div>
<p>The first thing I want you to note about this approach is that it specifically aims to resolve the issue we’ve already seen with <strong>utilitarianism</strong>, namely, that * Optimizing <strong>society-level</strong> desiderata (like “overall happiness”) may lead to * <strong>individuals</strong> being brutally mistreated (e.g., having their rights violated)</p>
<p>You can also hopefully see how this notion (Fairness Through Awarness) could provide a Rawls-style <strong>ordering</strong>: individual fairness <strong>lexically prior</strong> to group-level fairness (optimize group-level fairness once individual-level is satisfied).</p>
<p>Then lastly, as you saw on HW2, this general notion of Fairness Through Awareness can be <strong>operationalized</strong> as a measurable quantity by, for example, implementing what is generally called <strong>metric fairness</strong>: Given a similarity metric <span class="math inline">\(m: \mathcal{I} \times \mathcal{I} \rightarrow \mathbb{R}\)</span>, where <span class="math inline">\(\mathcal{I}\)</span> is the set of all individuals,</p>
<p><span class="math display">\[
|D_i - D_j| \leq m(i, j)
\]</span></p>
<p>for all pairs of individuals <span class="math inline">\((i, j)\)</span>. Or in other words, that the difference between the <strong>decisions</strong> <span class="math inline">\(D_i\)</span> and <span class="math inline">\(D_j\)</span> should be <strong>bounded above</strong> by the <strong>similarity</strong> <span class="math inline">\(m(i,j)\)</span> between <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>.</p>
<p>This, to me, is already slightly more than you need to know for the midterm, but if you want to dive into this Context-Sensitive approach specifically, Section 5.1 of <span class="citation" data-cites="mitchell_algorithmic_2021">(<a href="#ref-mitchell_algorithmic_2021" role="doc-biblioref"><strong>mitchell_algorithmic_2021?</strong></a>)</span> has a really great discussion of <strong>Metric Fairness</strong> specifically.</p>
</section>
<section id="causal-fairness" class="level3">
<h3 class="anchored" data-anchor-id="causal-fairness">(4.2) Causal Fairness</h3>
<p>This is the capital-B capital-D Big Deal approach to fairness, in my view, but you’ve already heard enough about that in class and on HW2!</p>
<p>So, for the midterm, instead I will just say that the key thing I want you to be comfortable with for now is <strong>drawing and interpreting Causal Diagrams</strong> like the ones I’ve shown in the slides and drawn on the board in class.</p>
<p>First and foremost, if you absorb the <a href="./writeups/pgm-intro/index.html">Quick Intro to Probabilistic Graphical Models</a> writeup, you are most of the way there to understanding Causal Diagrams in general, since (sweeping some details under the rug) these Causal Diagrams are primarily just PGMs where we interpret the <strong>edges</strong> (the <strong>arrows</strong> in the PGMs) as hypothesized <strong>causal effects</strong>.</p>
<p>Thus, for the midterm, my first goal is to test your ability to read these PGMs and understand what they’re <strong>positing</strong> (“saying”) about the world. For example, if I give you a hypothesis like</p>
<ul>
<li><span class="math inline">\(H_1\)</span>: Individual <span class="math inline">\(i\)</span> was arrested because they are black</li>
</ul>
<p>You should be able to “translate” this into a causal diagram based on:</p>
<ul>
<li>A random variable <span class="math inline">\(Y_i\)</span> representing whether or not an individual <span class="math inline">\(i\)</span> was arrested (where we use the letter <span class="math inline">\(Y\)</span> here speicifcally because we’re representing an <strong>outcome</strong> that we’re hoping to <strong>explain</strong>)</li>
<li>A random variable <span class="math inline">\(A_i\)</span> representing the race of individual <span class="math inline">\(i\)</span>, and</li>
<li>An edge <span class="math inline">\(A_i \rightarrow Y_i\)</span>, representing the <strong>hypothesis</strong> that individual <span class="math inline">\(i\)</span>’s specific <span class="math inline">\(A_i\)</span> value (<span class="math inline">\(A_i = a_i\)</span>) is what caused <span class="math inline">\(Y_i\)</span> to take on individual <span class="math inline">\(i\)</span>’s specific <span class="math inline">\(Y_i\)</span> value (<span class="math inline">\(Y_i = y_i = 1\)</span>, in this case).</li>
</ul>
<p>Then, once you’re comfortable with this process of “implementing” hypotheses by constructing causal diagrams, the only other thing I think will be important for the midterm is your ability to <strong>adjudicate between</strong> two or more such diagrams on the basis of their plausibility.</p>
<p>What I mean by that is… keep in mind the definition of causality that was given in a slide in class:</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Defining Causality [@hume_treatise_1739]">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Defining Causality <span class="citation" data-cites="hume_treatise_1739">(<a href="#ref-hume_treatise_1739" role="doc-biblioref"><strong>hume_treatise_1739?</strong></a>)</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p><span class="math inline">\(X\)</span> causes <span class="math inline">\(Y\)</span> if and only if:</p>
<ol type="1">
<li><span class="math inline">\(X\)</span> <em>temporally precedes</em> <span class="math inline">\(Y\)</span> and</li>
<li><ul>
<li>In <strong>two worlds</strong> <span class="math inline">\(W_0\)</span> and <span class="math inline">\(W_1\)</span> where</li>
<li>everything is exactly the same <strong>except that</strong> <span class="math inline">\(X = 0\)</span> in <span class="math inline">\(W_0\)</span> and <span class="math inline">\(X = 1\)</span> in <span class="math inline">\(W_1\)</span>,</li>
<li><span class="math inline">\(Y = 0\)</span> in <span class="math inline">\(W_0\)</span> and <span class="math inline">\(Y = 1\)</span> in <span class="math inline">\(W_1\)</span>.</li>
</ul></li>
</ol>
</div>
</div>
<p>You should be able to use this definition to (for example) <strong>eliminate implausible causal diagrams</strong>, namely, causal diagrams which violate the basic predicates within this definition. So, for example, say I gave you the following causal diagram as a causal hypothesis regarding <strong>how toasters toast a piece of bread <span class="math inline">\(i\)</span></strong>:</p>
<ul>
<li><span class="math inline">\(T_i\)</span> is a Random Variable which is <span class="math inline">\(0\)</span> if the bread has not yet been placed in the toaster and <span class="math inline">\(1\)</span> if has been placed in the toaster,</li>
<li><span class="math inline">\(C_i\)</span> is a Random Variable which is <span class="math inline">\(0\)</span> if the bread is not cooked, and <span class="math inline">\(1\)</span> if the bread is cooked, and</li>
<li>There is an arrow <span class="math inline">\(C_i \rightarrow T_i\)</span></li>
</ul>
<p>You should be able to identify this as an <strong>implausible</strong> causal diagram—meaning, a causal diagram representing an <strong>implausible</strong> hypothesis about how toasters work, relative to the Humean notion of causality—since in our observations of how toasters work, the bread being placed in the toaster (<span class="math inline">\(\text{do}(T_i = 1)\)</span>) occurs <strong>before</strong> the bread being cooked <span class="math inline">\(C_i = 1\)</span>, temporally.</p>
</section>
</section>
<section id="part-5-doin-thangs-causality-continued" class="level2">
<h2 class="anchored" data-anchor-id="part-5-doin-thangs-causality-continued">Part 5: Doin Thangs (Causality Continued)</h2>
<p>Short story short, the example from the end of our most recent meeting, where we showed how it’s possible to have:</p>
<ul>
<li><span class="math inline">\(\Pr(Y = 1) = p_y\)</span>, and</li>
<li><span class="math inline">\(\Pr(Y = 1 \mid X = 1) \neq p_y\)</span>, and yet</li>
<li><span class="math inline">\(\Pr(Y = 1 \mid \text{do}(X = 1)) = p_y\)</span>,</li>
</ul>
<p>Thus revealing the fact that <span class="math inline">\(\Pr(Y = 1 \mid X = 1)\)</span> does <strong>not</strong> capture the causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> in this case, which is just one specific instance of the general maxim you already know, that <strong>correlation does not imply causation</strong>.</p>
<p>And yet, with this <span class="math inline">\(\text{do}(E)\)</span> operator (where <span class="math inline">\(E\)</span> is some probabilistic event), we have something <strong>concrete</strong> that we can use to start figuring out <strong>when</strong> observing a correlation <strong>does</strong> allow us to infer a causal effect!</p>
<p>The actual figuring-out will have to wait until after the midterm. But I want you to have that notion in your head when you see the <span class="math inline">\(\text{do}(\cdot)\)</span> operator and/or a causal diagram: that these are the tools that are going to allow us to <strong>bridge this gap</strong> between <strong>correlation</strong> and <strong>causation</strong>, something that <strong>probability theory alone</strong> (i.e., the stuff you may have learned in DSAN 5100) <strong>cannot do!</strong></p>
<p>As a preview, which I mentioned at the very very end of the “do-calculus” example I went through on the board: <span class="citation" data-cites="pearl_causality_2000">Pearl (<a href="#ref-pearl_causality_2000" role="doc-biblioref">2000</a>)</span> is literally a gigantic book that meticulously works through <strong>all possible causal diagrams</strong><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> and proves a massively important theorem that we’ll see after the midterm, which tells us <strong>precisely what conditions need to be met (in a given causal system) for us to be able to infer causal effects from conditional probabilities</strong>.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-pearl_causality_2000" class="csl-entry" role="listitem">
Pearl, Judea. 2000. <em>Causality: <span>Models</span>, <span>Reasoning</span>, and <span>Inference</span></em>. Cambridge University Press.
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Not like, one-by-one, but by mathematically characterizing all of the possibilities, like how we can say that <em>«Assuming Euclid’s 5th Postulate, the interior angles of a triangle sum to 180°»</em>, despite not having gone one-by-one through every triangle.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jpowerj/dsan5650/blob/main/midterm.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>